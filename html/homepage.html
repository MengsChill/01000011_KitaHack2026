<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartStick 2026 | Chameleon Interface</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="../css/homepage.css">
</head>
<body>

    <div id="cursor-light"></div>
    <div class="bg-grid"></div>
    <canvas id="particle-canvas"></canvas>

    <nav class="top-nav">
        <a href="#" class="logo">SMART<span class="highlight">STICK</span></a>
        <div>
            <a href="dashboard.html" class="nav-btn">LAUNCH DASHBOARD</a>
        </div>
    </nav>

    <div id="stick-assembly">
        <div class="handle">
            <div class="part-label" style="top: 20px;">HAPTIC FEEDBACK UNIT</div>
        </div>
        <div class="shaft">
            <div class="neon-strip"></div>
            <div class="part-label" style="top: 20%; left: 110%;">GEMINI AI VISION</div>
            <div class="part-label" style="top: 70%; left: 110%;">LI-ION BATTERY</div>
        </div>
        <div class="wheel-base">
            <div class="wheel-rim"></div>
            <div class="part-label" style="top: 40%;">OMNI-DRIVE MOTORS</div>
        </div>
    </div>

    <section id="sec-1">
        <div class="content-box visible">
            <h1>NEURAL<br><span class="highlight">NAVIGATION</span></h1>
            <p>SCROLL TO BEGIN INITIALIZATION</p>
        </div>
    </section>

    <section id="sec-2">
        <div class="content-box">
            <h2>SYSTEM CHECK // 01</h2>
            <h3>OMNI WHEELS</h3>
            <p>Active suspension adapts to <strong>rough terrain</strong> instantly. <br>Glides over gravel, grass, and pavement.</p>
        </div>
    </section>

    <section id="sec-3">
        <div class="content-box">
            <h2>SYSTEM CHECK // 02</h2>
            <h3>GEMINI VISION</h3>
            <p>Our camera identifies objects in <span class="highlight">real-time</span>. <br>"Stairs detected. Slowing down."</p>
        </div>
    </section>

    <section id="sec-4">
        <div class="content-box">
            <h2>SYSTEM CHECK // 03</h2>
            <h3>HAZARD DETECTION</h3>
            <p>Vibration feedback alerts users of dangerous <span class="highlight">drop-offs</span> or oncoming traffic.</p>
        </div>
    </section>

    <section id="sec-5">
        <div class="content-box">
            <h2>SYSTEM CHECK // 04</h2>
            <h3>PATH FINDING</h3>
            <p>Google Maps integration finds the <span class="highlight">safest route</span>, avoiding construction zones.</p>
        </div>
    </section>

    <section id="sec-6">
        <div class="content-box">
            <h3>SYSTEM READY</h3>
            <p>INTERNAL ARCHITECTURE REVEALED.</p>
            <br>
            <a href="dashboard.html" class="nav-btn">ENTER DASHBOARD</a>
        </div>
    </section>

    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-col">
                <h4>SMART<span class="highlight">STICK</span> 2026</h4>
                <p>Reinventing mobility for the visually impaired through Neural AI and adaptive robotics.</p>
                <div class="email-box">
                    <input type="email" placeholder="Updates...">
                    <button>&rarr;</button>
                </div>
            </div>
            <div class="footer-col">
                <h4>INTERFACE</h4>
                <ul class="footer-links">
                    <li><a href="#">System Reboot</a></li>
                    <li><a href="dashboard.html">Live Dashboard</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>SUPPORT</h4>
                <ul class="footer-links">
                    <li><a href="#">User Manual</a></li>
                    <li><a href="#">Troubleshoot</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>PROJECT SPECS</h4>
                <ul class="footer-links">
                    <li><a href="#">GitHub Repo</a></li>
                    <li><a href="#">Tech Stack</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            &copy; 2026 SMARTSTICK PROJECT. DESIGNED FOR ACCESSIBILITY.
        </div>
    </footer>

    <script>
        // --- 1. MOUSE TRACKING SPOTLIGHT ---
        document.addEventListener('mousemove', (e) => {
            document.documentElement.style.setProperty('--mouse-x', `${e.clientX}px`);
            document.documentElement.style.setProperty('--mouse-y', `${e.clientY}px`);
        });

        // --- 2. PARTICLE ENGINE ---
        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let particles = [];
        let mouse = { x: -1000, y: -1000 };

        function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
        }
        window.addEventListener('resize', resize);
        window.addEventListener('mousemove', (e) => { mouse.x = e.clientX; mouse.y = e.clientY; });
        resize();

        class Particle {
            constructor() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.size = Math.random() * 2 + 1;
            }
            update() {
                this.x += this.vx; this.y += this.vy;
                const dx = this.x - mouse.x;
                const dy = this.y - mouse.y;
                const dist = Math.sqrt(dx*dx + dy*dy);
                
                if (dist < 150) {
                    const angle = Math.atan2(dy, dx);
                    const force = (150 - dist) / 150;
                    const push = force * 2;
                    this.x += Math.cos(angle) * push;
                    this.y += Math.sin(angle) * push;
                }
                if (this.x < 0) this.x = width;
                if (this.x > width) this.x = 0;
                if (this.y < 0) this.y = height;
                if (this.y > height) this.y = 0;
            }
            draw() {
                const neonColor = getComputedStyle(document.documentElement).getPropertyValue('--neon-color').trim();
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = neonColor;
                ctx.globalAlpha = 0.6;
                ctx.fill();
            }
        }
        for (let i = 0; i < 80; i++) particles.push(new Particle());
        function animateCanvas() {
            ctx.clearRect(0, 0, width, height);
            ctx.globalCompositeOperation = 'lighter';
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animateCanvas);
        }
        animateCanvas();


        // --- 3. SCROLL ANIMATION ---
        const stick = document.getElementById('stick-assembly');
        const wheel = document.querySelector('.wheel-rim');
        const handle = document.querySelector('.handle');
        const wheelBase = document.querySelector('.wheel-base');
        const labels = document.querySelectorAll('.part-label');
        const contentBoxes = document.querySelectorAll('.content-box');
        const root = document.documentElement;
        
        let ticking = false;

        window.addEventListener('scroll', () => {
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    updateScrollLogic();
                    ticking = false;
                });
                ticking = true;
            }
        });

        updateScrollLogic(); // Init

        function updateScrollLogic() {
            const scrollY = window.scrollY;
            const height = window.innerHeight;
            // Adjusted total height calculation for better pacing with new padding
            const totalHeight = document.body.scrollHeight - height - 200; 
            const progress = (scrollY / totalHeight) * 5; 
            
            // A. CHANGE COLOR THEME
            let hue = 180;
            if (progress < 1) hue = 180; 
            else if (progress >= 1 && progress < 2) hue = 280; 
            else if (progress >= 2 && progress < 3) hue = 320; 
            else if (progress >= 3 && progress < 4) hue = 30;  
            else if (progress >= 4) hue = 120; // Green

            root.style.setProperty('--primary-hue', hue);
            root.style.setProperty('--neon-color', `hsl(${hue}, 100%, 50%)`);

            // B. ANIMATE STICK
            let r=0, x=-50, y=-50, s=1;
            let stickOpacity = 1;
            let handleY = 0; 
            let wheelY = 0;
            let labelOpacity = 0; 

            if (progress < 1) { 
                // PHASE 1: Entrance
                stickOpacity = Math.max(0, (progress - 0.2) * 1.5); 
                stickOpacity = Math.min(stickOpacity, 1);
                y = 50 - (stickOpacity * 100); 
                r = progress * 45; x = -50; s = 0.8 + (progress * 0.2);
            } 
            else if (progress < 2) { 
                const p = progress - 1; r = 45 + (p * 45); x = -20 - (p * 60); s = 0.9;
            }
            else if (progress < 3) { 
                const p = progress - 2; r = 90 + (p * 90); x = -80 + (p * 80); s = 0.9 + (p * 0.2);
            }
            else if (progress < 4) { 
                const p = progress - 3; r = 180 + (p * 90); x = 0 - (p * 30); s = 1.1;
            }
            else { 
                // --- PHASE 5: THE REVEAL ---
                const p = progress - 4; 
                const rotateProgress = Math.min(p, 1);
                r = 270 + (rotateProgress * 90); 

                // Center X
                x = -30 - (rotateProgress * 20); 
                
                // IMPORTANT: Raise Y slightly in final phase to clear footer better
                // Instead of -50% (dead center), use -55% to shift it up slightly
                y = -50 - (rotateProgress * 5); 

                s = 1.1 + (rotateProgress * 0.1); 
                
                if (p > 0.8) {
                    const sepProgress = (p - 0.8) * 1.5; 
                    const cappedSep = Math.min(sepProgress, 1.2); 
                    handleY = -80 * cappedSep; 
                    wheelY = -80 * cappedSep; 
                    labelOpacity = Math.min(sepProgress, 1);
                    stick.classList.add('active-structure'); 
                } else {
                    stick.classList.remove('active-structure');
                }
            }

            stick.style.opacity = stickOpacity;
            // Apply the new Y position
            stick.style.transform = `translate3d(${x}%, ${y}%, 0) rotate(${r}deg) scale(${s})`;
            if(wheel) wheel.style.transform = `rotate(${scrollY * 0.5}deg)`;
            handle.style.transform = `translateY(${handleY}px) skewX(-10deg)`;
            wheelBase.style.bottom = `${-wheelY}px`; 
            labels.forEach(lbl => {
                lbl.style.opacity = labelOpacity;
                lbl.style.transform = `translateX(${(1 - labelOpacity) * -20}px)`;
            });

            // C. REVEAL TEXT
            const trigger = height * 0.8;
            contentBoxes.forEach(box => {
                if (box.getBoundingClientRect().top < trigger) {
                    box.classList.add('visible');
                } else {
                    box.classList.remove('visible');
                }
            });
        }
    </script>
</body>
</html>